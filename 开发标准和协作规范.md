# AI-HUB 项目开发标准与协作规范

## 1. 项目概述

- **项目名称**：AI-HUB 教学实训智能体
- **核心技术栈**：Vue 3, TypeScript, Vite, Pinia, Vue Router, Tailwind CSS (v4)
- **简介**：一个面向AI教育和实训的现代化Web应用，旨在提供智能化的教学、练习和管理体验。
- **目标**：本文档旨在为参与本项目开发的人类与AI工程师提供一套统一的开发标准和协作规范，确保代码质量、风格一致性和高效协作。

---

## 2. 技术栈与关键库

- **构建工具**: Vite
- **前端框架**: Vue 3 (使用 `<script setup>` 和 Composition API)
- **语言**: TypeScript
- **路由**: Vue Router
- **状态管理**: Pinia
- **UI框架**: Tailwind CSS v4
- **HTTP请求**: Axios
- **数据可视化**: ECharts
- **Markdown解析**: markdown-it

---

## 3. 目录结构约定

为了实现清晰的模块化和关注点分离，项目采用以下目录结构：

```
/src
|
├── assets/             # 存放全局 CSS, 图片, 字体等静态资源
|
├── components/         # 存放可复用的 UI 组件
|   ├── common/         # 全局通用组件 (如 Button, Modal, Card)
|   ├── layout/         # 布局组件 (TeacherLayout.vue, StudentLayout.vue)
|   └── [feature]/      # 按业务功能划分的组件 (如 course/, user/)
|
├── views/ (或 pages/) # 存放页面级组件，与路由一一对应
|   ├── public/         # 公共页面 (LoginView.vue)
|   ├── teacher/        # 教师端页面
|   ├── student/        # 学生端页面
|   └── admin/          # 管理端页面
|
├── router/             # Vue Router 配置
|   └── index.ts        # 包含路由定义与导航守卫
|
├── store/ (或 stores/) # Pinia 状态管理
|   ├── user.ts         # 用户信息、token、角色等
|   └── [module].ts     # 按业务模块划分的store (如 course.ts)
|
├── services/ (或 api/) # API 请求模块
|   ├── index.ts        # Axios 实例封装与拦截器
|   └── [module]Service.ts # 按业务模块封装的API请求
|
├── App.vue             # 根组件
├── main.ts             # 应用入口文件
└── style.css           # Tailwind CSS 入口及主题配置
```

---

## 4. 编码规范

### 4.1. 核心思想：组件化开发

- **万物皆组件**: 所有可复用或独立管理的UI模块，都应该被拆分成一个 `.vue` 组件。复杂的页面应拆解成一个清晰的组件树，每个组件只负责单一的功能。
- **布局 (Layouts)**: 针对不同用户角色（如教师、学生、管理员）的通用页面结构，应抽象为布局组件（如 `TeacherLayout.vue`），存放于 `src/components/layout/`。布局组件通过 `<RouterView>` 嵌套路由，实现页面框架的复用。

### 4.2. Vue 组件

- **语法**: 统一使用 `<script setup lang="ts">` 语法，以获得更简洁的代码和更好的类型推断。
- **命名**: 组件文件名和引用名均使用 `PascalCase` (例如 `MyComponent.vue`)。页面级组件也应遵循此规范。
- **API**: 优先使用 Composition API，数据和方法直接在 `<script setup>` 中定义。
- **Props**: 使用 `defineProps` 宏，并为每个 prop 提供明确的 TypeScript 类型。

### 4.3. TypeScript

- 强制为所有变量、函数参数、返回值和状态添加明确的类型定义，充分利用TypeScript的类型安全优势。
- 避免使用 `any` 类型，除非在特殊情况下无法避免。

---

## 5. 状态管理 (Pinia)

- **规范目录**: `src/store/`
- **原则**:
    - **用户状态**: 用户的登录状态、Token、角色（student, teacher, admin）、个人信息等，**必须**存储在 `store/user.ts` 中，作为全局身份认证的唯一来源。
    - **业务状态**: 跨页面共享的业务数据（如当前正在编辑的课程信息），应根据业务模块创建独立的 store 文件（如 `store/course.ts`），避免组件之间繁琐的 props/emits 传递。

---

## 6. 路由管理 (Vue Router)

- **规范文件**: `src/router/index.ts`
- **原则**:
    - 所有页面级路由在此文件中集中定义。
    - 路由组件必须使用动态导入（懒加载）方式引入，以优化首屏加载性能：`component: () => import('../views/teacher/DashboardView.vue')`。
    - 路由命名 (`name`) 应与组件名保持一致（`PascalCase`）。

### 6.1. 路由守卫 (Navigation Guards)
- **必须**在 `router/index.ts` 中设置全局前置守卫 (`router.beforeEach`)。
- 守卫的核心职责是：在用户访问需要特定权限的页面前，检查 Pinia 中存储的用户 Token 和角色信息。
- 如果用户未登录或权限不足，则自动重定向到登录页面 (`/login`)，阻止未授权的访问。

---

## 7. 样式方案 (Tailwind CSS)

本项目完全拥抱 **Utility-First** 的开发理念，所有样式应优先、且尽可能只使用 Tailwind CSS 功能类。

- **核心配置文件**: `src/style.css` (使用 Tailwind v4 的 `@theme` 规则)
- **核心原则**:
    1.  **严禁**在组件的 `<style>` 块中编写局部作用域的CSS，除非用于实现 Tailwind 无法覆盖的、极其复杂的或动态的样式（如 `v-for` 循环生成的动态样式）。
    2.  所有设计规范（颜色、字体、间距、阴影等）均已在 `src/style.css` 的 `@theme` 规则中定义为 **Design Tokens**。**必须**使用这些预设值，禁止在代码中使用魔术数字或硬编码的颜色值。

### 7.1. 视觉系统核心 (Design Tokens)

请在开发中严格参考 `src/style.css` 中的 `@theme` 规则。

- **色彩 (Colors)**: `--color-wisdom-blue`, `--color-quantum-gray`,等。
- **字体 (Typography)**: `--font-satoshi`, `--font-inter`, `--font-fira`。
- **空间与间距 (Spacing)**: `--spacing-module`, `--spacing-content`, `--spacing-grid`。
- **阴影 (Shadows)**: `--shadow-card`, `--shadow-hover`, `--shadow-focus`。
- **动画 (Animations)**: `--animate-knowledge-flow`, 等。

### 7.2. 响应式设计 (Responsive Design)

- **移动端优先 (Mobile-First)**: 所有布局和样式**必须**首先针对移动设备进行开发。然后使用 Tailwind 的响应式断点前缀（`sm:`, `md:`, `lg:`, `xl:`, `2xl:`）逐步增强，以适应更大的屏幕。
- **弹性布局**: 优先使用 Flexbox (`flex`, `flex-wrap`) 和 CSS Grid (`grid`, `grid-cols-*`) 来构建能够自然适应内容和屏幕尺寸的流式布局。
- **断点前缀应用**:
    -   **布局变化**: 使用 `md:grid-cols-2` 或 `lg:flex-row` 来改变不同屏幕尺寸下的布局结构。
    -   **间距调整**: 使用 `p-4 md:p-8` 来为不同设备提供更合适的内边距。
    -   **显隐控制**: 使用 `hidden md:block` 来在移动端隐藏非关键元素，在桌面端显示它们。
- **使用示例**:
    ```html
    <!-- 一个响应式卡片网格布局 -->
    <div class="grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-3">
        <!-- Card 1 -->
        <div>...</div>
        <!-- Card 2 -->
        <div>...</div>
        <!-- Card 3 -->
        <div>...</div>
    </div>
    ```

---

## 8. API 请求 (Services)

- **约定目录**: `src/services/`
- **原则**:
    - **禁止**在组件中直接调用 `axios.post(...)`。
    - 在 `services/index.ts` 中封装一个全局 Axios 实例，统一配置 `baseURL`、`timeout` 以及请求/响应拦截器（如：自动附加Token到请求头、统一处理HTTP错误码）。
    - 各业务模块的API请求**必须**封装在独立的 `[module]Service.ts` 文件中（如 `courseService.ts`, `authService.ts`）。这样使得业务逻辑与视图分离，易于维护和测试。

### 8.1. 开发环境跨域代理 (Proxy)

- **配置文件**: `vite.config.ts`
- **目的**: 为了在开发环境中解决浏览器同源策略导致的跨域请求问题，项目使用 Vite 内置的服务器代理功能。
- **工作机制**:
    1.  所有在 `services` 模块中发起的API请求，其URL**必须**以 `/api` 作为前缀。例如: `axios.get('/api/users')`。
    2.  Vite 开发服务器会拦截所有 `/api/*` 的请求。
    3.  服务器根据 `vite.config.ts` 中的 `server.proxy` 配置，将请求**转发**到真实的后端API服务器，并在转发过程中移除 `/api` 前缀。
- **配置示例**:
    ```typescript
    // vite.config.ts
    export default defineConfig({
      // ...
      server: {
        proxy: {
          '/api': {
            target: 'http://your-actual-backend-api.com', // 必须替换为真实的后端地址
            changeOrigin: true,
            rewrite: (path) => path.replace(/^\/api/, ''),
          },
        }
      }
    });
    ```
- **重要提示**:
    - 开发者在本地启动项目前，**必须**将 `vite.config.ts` 文件中的 `target` 地址替换为自己环境的后端服务API地址。
    - 每次修改 `vite.config.ts` 文件后，**必须**重启 Vite 开发服务器才能使配置生效。

---

## 9. 从HTML迁移到Vue项目的说明

当提供静态HTML文件作为参考时，AI开发者需遵循以下核心原则将其转换为动态、响应式的Vue组件：

1.  **思维转变**：从"页面"思维转变为"**组件化**"思维。将HTML中的每一个独立、可复用的部分（如导航栏、卡片、模态框）识别出来，并创建对应的 `.vue` 组件。
2.  **数据驱动视图**：
    -   将HTML中的静态内容（如用户名、列表项）替换为Vue的动态数据。使用 `ref` 或 `reactive` 定义响应式状态。
    -   使用 `v-for` 渲染列表，`v-if`/`v-show` 控制元素的条件显示。
    -   表单输入框使用 `v-model` 进行双向数据绑定。
3.  **事件处理与导航**：
    -   将HTML中的 `onclick` 等事件替换为Vue的 `@click` 等事件监听器，并在 `<script setup>` 中定义对应的处理函数。
    -   对于页面间的跳转，使用 Vue Router 的 `<router-link>` 组件或 `useRouter` 훅替代原生的 `<a>` 标签，以实现单页应用内的平滑导航。
    -   对于子组件与父组件的通信，使用 `defineEmits` 和 `emit`。
4.  **状态管理集成**：
    -   识别出需要在多个组件或页面间共享的状态（如用户登录信息、当前选中的角色），并将其交由 Pinia store 管理。
5.  **样式转换**：
    -   将HTML中内联的 `style` 属性或 `<style>` 标签中的原生CSS，转换为Tailwind CSS的功能类。
    -   **必须**优先使用在 `src/style.css` 中定义的Design Tokens（如 `bg-wisdom-blue` 对应 `--color-wisdom-blue`）。

---

## 10. AI 协作提示词指南

当需要AI进行开发时，请遵循以下格式提供清晰、结构化的指令。

- **指令结构**: `[操作] [目标文件/模块] [具体需求] [关键设计令牌]`

- **示例 1: 创建新页面**
  > "请在 `src/views/teacher/` 下创建一个名为 `UserProfile.vue` 的新页面，并在 `src/router/index.ts` 中配置其路由，路径为 `/profile`。该页面需要在 `TeacherLayout` 布局内展示。页面需要从 `useUserStore` 获取并显示用户名。请使用 `font-satoshi` 作为页面大标题，并用一个 `shadow-card` 样式的卡片包裹用户信息区域，卡片内边距为 `p-content`。"

- **示例 2: 从HTML迁移**
  > "请参考我提供的 `course-design.html` 的布局和样式，将其转换为Vue组件。创建一个名为 `CourseDesignView.vue` 的页面级组件。**页面布局需要考虑响应式设计**：在移动端，"课程大纲"、"内容编辑器"和"AI助手"垂直堆叠；在 `md` 及以上屏幕尺寸，它们应在一个三列网格中展示。所有样式必须使用Tailwind功能类，并遵循 `style.css` 中定义的设计令牌。"

- **示例 3: 实现新功能**
  > "请在 `src/views/CourseDesign.vue` 的预览区域下方添加一个"导出PDF"按钮。按钮样式使用 `bg-secondary`，文字为白色。目前只需完成按钮的UI布局，暂不实现功能。" 