{"openapi":"3.0.1","info":{"title":"AIHub API文档","description":"AIHub系统API接口文档","contact":{"name":"AIHub","url":"https://www.aihub.com","email":"admin@aihub.com"},"license":{"name":"Apache 2.0","url":"https://www.apache.org/licenses/LICENSE-2.0.html"},"version":"v1.0.0"},"servers":[{"url":"http://localhost:8080","description":"Generated server url"}],"security":[{"JWT":[]}],"tags":[{"name":"系统测试","description":"用于验证服务可用性的测试接口"},{"name":"课程管理","description":"提供课程的增删改查及解析功能"},{"name":"用户管理","description":"提供用户的增删改查功能"},{"name":"用户认证","description":"提供用户登录和注册功能"}],"paths":{"/courses":{"post":{"tags":["课程管理"],"summary":"创建新课程","description":"创建一个新的课程，并自动生成对应的Markdown文件。只有教师或管理员可以访问。","operationId":"createCourse","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateCourseRequest"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ResultCourses"}}}}}}},"/courses/{courseId}/parse":{"post":{"tags":["课程管理"],"summary":"解析课程内容","description":"解析指定课程的Markdown文件，并将其结构化的章节信息存入数据库。","operationId":"parseCourse","parameters":[{"name":"courseId","in":"path","required":true,"schema":{"type":"integer","format":"int32"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ResultObject"}}}}}}},"/auth/register":{"post":{"tags":["用户认证"],"summary":"用户注册","description":"提供新用户注册功能","operationId":"register","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RegisterRequest"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ResultVoid"}}}}}}},"/auth/login":{"post":{"tags":["用户认证"],"summary":"用户登录","description":"用户使用用户名和密码进行登录认证，成功后返回JWT","operationId":"login","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginRequest"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ResultMapStringString"}}}}}}},"/users":{"get":{"tags":["用户管理"],"summary":"获取所有用户列表","description":"获取所有注册用户的列表","operationId":"getAllUsers","responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ResultListUsers"}}}}}}},"/users/{id}":{"get":{"tags":["用户管理"],"summary":"根据ID获取用户","description":"根据用户ID获取单个用户详细信息","operationId":"getUserById","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ResultUsers"}}}}}}},"/test/hello":{"get":{"tags":["系统测试"],"summary":"服务可用性测试","description":"返回一个'Hello World'字符串，用于检测服务是否正常运行","operationId":"hello","responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ResultString"}}}}}}},"/courses/{courseId}/content":{"get":{"tags":["课程管理"],"summary":"获取课程Markdown原文","description":"获取指定课程的完整Markdown文件内容，用于前端渲染。任何认证过的用户都可以访问。","operationId":"getCourseContent","parameters":[{"name":"courseId","in":"path","required":true,"schema":{"type":"integer","format":"int32"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ResultString"}}}}}}},"/courses/my":{"get":{"tags":["课程管理"],"summary":"获取当前教师的课程列表","description":"获取当前登录的教师用户创建的所有课程列表。","operationId":"getMyCourses","responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ResultListCourses"}}}}}}}},"components":{"schemas":{"CreateCourseRequest":{"required":["title"],"type":"object","properties":{"title":{"type":"string","description":"课程名称"},"description":{"type":"string","description":"课程描述"}},"description":"创建课程请求对象"},"Courses":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"createTime":{"type":"string","format":"date-time"},"updateTime":{"type":"string","format":"date-time"},"deleted":{"type":"integer","format":"int32"},"title":{"type":"string","description":"课程名称"},"description":{"type":"string","description":"课程描述"},"teacherId":{"type":"integer","description":"教师ID","format":"int32"},"filePath":{"type":"string","description":"Markdown文件路径"},"fileHash":{"type":"string","description":"文件内容哈希，用于检测变化"},"fileUpdatedAt":{"type":"string","description":"文件最后修改时间","format":"date-time"},"parseStatus":{"type":"string","description":"解析状态"},"parseError":{"type":"string","description":"解析错误信息"},"parsedAt":{"type":"string","description":"最后解析时间","format":"date-time"},"chapterCount":{"type":"integer","description":"章节数量","format":"int32"}},"description":"课程基本信息和Markdown文件元数据"},"ResultCourses":{"type":"object","properties":{"success":{"type":"boolean"},"code":{"type":"integer","format":"int32"},"message":{"type":"string"},"data":{"$ref":"#/components/schemas/Courses"}}},"ResultObject":{"type":"object","properties":{"success":{"type":"boolean"},"code":{"type":"integer","format":"int32"},"message":{"type":"string"},"data":{"type":"object"}}},"RegisterRequest":{"required":["email","password","username"],"type":"object","properties":{"username":{"type":"string","description":"用户名","example":"newuser"},"password":{"type":"string","description":"密码","example":"password123"},"email":{"type":"string","description":"电子邮箱","example":"newuser@example.com"},"fullName":{"type":"string","description":"真实姓名","example":"张三"},"userCode":{"type":"string","description":"学号或教师编号","example":"20230001"},"role":{"type":"string","description":"用户角色 (student 或 teacher)","example":"student","default":"student","enum":["student","teacher"]}},"description":"用户注册请求体"},"ResultVoid":{"type":"object","properties":{"success":{"type":"boolean"},"code":{"type":"integer","format":"int32"},"message":{"type":"string"},"data":{"type":"object"}}},"LoginRequest":{"required":["password","username"],"type":"object","properties":{"username":{"type":"string","description":"用户名","example":"testuser"},"password":{"type":"string","description":"密码","example":"password123"}},"description":"登录请求体"},"ResultMapStringString":{"type":"object","properties":{"success":{"type":"boolean"},"code":{"type":"integer","format":"int32"},"message":{"type":"string"},"data":{"type":"object","additionalProperties":{"type":"string"}}}},"ResultListUsers":{"type":"object","properties":{"success":{"type":"boolean"},"code":{"type":"integer","format":"int32"},"message":{"type":"string"},"data":{"type":"array","items":{"$ref":"#/components/schemas/Users"}}}},"Users":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"createTime":{"type":"string","format":"date-time"},"updateTime":{"type":"string","format":"date-time"},"deleted":{"type":"integer","format":"int32"},"username":{"type":"string","description":"用户名, 用于登录"},"email":{"type":"string","description":"电子邮箱, 用于登录和通知"},"userCode":{"type":"string","description":"学号或教师编号, 具有唯一性"},"passwordHash":{"type":"string","description":"加密后的密码哈希值"},"fullName":{"type":"string","description":"用户真实姓名"},"avatar":{"type":"string","description":"用户头像的URL链接"},"role":{"type":"string","description":"用户角色: student, teacher, or admin"}},"description":"存储所有系统用户，包括学生、教师和管理员"},"ResultUsers":{"type":"object","properties":{"success":{"type":"boolean"},"code":{"type":"integer","format":"int32"},"message":{"type":"string"},"data":{"$ref":"#/components/schemas/Users"}}},"ResultString":{"type":"object","properties":{"success":{"type":"boolean"},"code":{"type":"integer","format":"int32"},"message":{"type":"string"},"data":{"type":"string"}}},"ResultListCourses":{"type":"object","properties":{"success":{"type":"boolean"},"code":{"type":"integer","format":"int32"},"message":{"type":"string"},"data":{"type":"array","items":{"$ref":"#/components/schemas/Courses"}}}}},"securitySchemes":{"JWT":{"type":"http","name":"JWT","scheme":"bearer","bearerFormat":"JWT"}}}}